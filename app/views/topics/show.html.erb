<h3><%= @topic.title %></h3>
<% #TODO ol、liタグからdivかsectionタグに変更する。idの番号で表示するようにしたいから %>
<div>
  <% @comments.each do |comment| %>
    <div>
      <% #コメントのidの数字を表示するとComment全体で数えたid番号が表示されてしまう %>
      <% #どうにかして関連付けられたTopicで数えたときのid番号(1から始まる)を表示させたい %>
      <% #each_with_indexで体裁は整えたが根本的な解決にはまだ遠い(ページネーションの挙動が、ページごとに1から表示になってしまう) %>
      <%= comment.reid %> : <%= comment.name %> :<%= comment.updated_at %><br>
      <%= comment.content %><br>
      <% #TODO なぜ削除用のlink_toに配列で渡すのか分からないので理解する %>
      <% #多分、Commentに対応するTopicとCommentそのものを両方渡す必要があるからかも %>
      <% #comment.topicとcommentを入れ替えるとsyntaxエラーが出るのは親であるTopicを先に渡していないから? %>
      <% #検証でソースコードを確認すると「href="/topics/31/comments/22"」と出る。何となくは理解できた気がするがはっきりしない %>
      <%= link_to '削除', [comment.topic, comment], method: :delete, data: { confirm: 'コメントを削除してよろしいですか'}, class: "text-danger" %>
    </div>
  <% end %>
  <%= will_paginate @comments %>
</div>
<div class="border-top border-dark pt-4 pb-4">
  <h2>コメントする</h2>
</div>
<div class="form-group">
  <%= form_with(model: [ @topic, @topic.comments.build ], local: true) do |form| %>
    <%= form.label :name, '名前' %><br>
    <%= form.text_field :name, class: "form-control" %><br>
    <%= form.label :content, '本文' %><br>
    <%= form.text_area :content, class: "form-control" %><br>
    <%= form.submit 'スレッドに書き込む', class: "btn btn-primary" %>
  <% end %>
</div>